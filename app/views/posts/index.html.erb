<div class="main posts-index">
  <div class="container-posts-index">
    <div class="posts-buttons">
      <button><%= link_to("All", "/posts/index") %></button>
      <button><%= link_to("Timeline", "/posts/index/#{@current_user.id}") %></button>
    </div>
    <% if @posts.empty? %>
      <div class="no-posts">Oops, you haven't posted anything yet.</div>
    <% else %>
      <% @posts.each do |post|%>
        <div class="posts-index-item">
          <div class="post-left">
            <img src="<%= "/user_images/#{post.user.image_name}" %>">
            <div class="post-user-name">
              <%= link_to(post.user.name, "/users/#{post.user.id}") %>
            </div>
          </div>
          <div class="post-right">
            <%= link_to(simple_format(post.content), "/posts/#{post.id}") %>
          </div>
          <div class="post-likes" data-post="<%= post %>">
            <% if Like.find_by(user_id: @current_user.id, post_id: post.id) != nil %>
              <%= link_to likes_delete_path(:post_id => post.id) do %>
                <i class="fas fa-thumbs-up liked"></i>
              <% end %>
              <% likes = Like.where(post_id: post.id) %>
              <% num_of_likes = likes.length %>
              <% if num_of_likes != 0 %>
                <div class="num-of-likes-liked"><%= num_of_likes %></div>
              <% end %>
            <% else %>
              <%= link_to likes_create_path(:post_id => post.id) do %>
                <i class="fas fa-thumbs-up not-liked"></i>
              <% end %>
              <% likes = Like.where(post_id: post.id) %>
              <% num_of_likes = likes.length %>
              <% if num_of_likes != 0 %>
                <div class="num-of-likes-not-liked"><%= num_of_likes %></div>
              <% end %>
            <% end %>
          </div>
        </div>
      <% end %>
    <% end %>
  </div>
</div>
